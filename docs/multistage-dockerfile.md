–ù–∏–∂–µ ‚Äî –∫–∞–∫ —ç—Ç–æ –æ–±—ã—á–Ω–æ –¥–µ–ª–∞—é—Ç **–ø–æ —Ç–∏–ø—É –ø—Ä–æ–µ–∫—Ç–∞** –∏ **–ø–æ —Å—Ä–µ–¥–∞–º (dev vs prod/CI)**.

## 1) Laravel + Blade

**Node –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏** —É —Ç–µ–±—è –µ—Å—Ç—å Vite/Tailwind/JS —Å–±–æ—Ä–∫–∞.

* **Prod/CI (best practice):** `multi-stage` –∏–ª–∏ —Å–±–æ—Ä–∫–∞ –∞—Å—Å–µ—Ç–æ–≤ –≤ CI ‚Üí –≤ PHP-–æ–±—Ä–∞–∑ –∫–æ–ø–∏—Ä—É–µ—à—å `public/build`.
* **Dev:** –º–æ–∂–Ω–æ –≤–æ–æ–±—â–µ –±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ node-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –µ—Å–ª–∏ —Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å HMR.
  –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Vite HMR ‚Äî —É–¥–æ–±–Ω–µ–µ **–æ—Ç–¥–µ–ª—å–Ω—ã–π node —Å–µ—Ä–≤–∏—Å** –≤ `docker-compose`.

–ò—Ç–æ–≥: —á–∞—â–µ –≤—Å–µ–≥–æ **multi-stage –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ**, –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî –ø–æ –∂–µ–ª–∞–Ω–∏—é –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ dev.

---

## 2) Laravel + Livewire

Livewire –Ω–µ —Ç—Ä–µ–±—É–µ—Ç Node —Å–∞–º –ø–æ —Å–µ–±–µ, –Ω–æ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Vite/Tailwind.

* **Prod/CI:** `multi-stage` / build –≤ CI ‚Üí –∫–æ–ø–∏—Ä—É–µ–º –∞—Å—Å–µ—Ç—ã.
* **Dev:** –µ—Å–ª–∏ –Ω—É–∂–µ–Ω Vite HMR ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π node –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–¥–æ–±–µ–Ω. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –º–æ–∂–Ω–æ –±–µ–∑.

–ò—Ç–æ–≥: **multi-stage –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ**, node-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —Ç–æ–ª—å–∫–æ —Ä–∞–¥–∏ HMR/—É–¥–æ–±—Å—Ç–≤–∞.

---

## 3) Laravel + Inertia + Vue

–¢—É—Ç —Ñ—Ä–æ–Ω—Ç –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Node (Vite).

* **Prod/CI (best practice):** `multi-stage` –∏–ª–∏ —Å–±–æ—Ä–∫–∞ –∞—Å—Å–µ—Ç–æ–≤ –≤ CI ‚Üí –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `public/build` –≤ PHP-–æ–±—Ä–∞–∑. –í —Ä–∞–Ω—Ç–∞–π–º–µ Node **–Ω–µ –Ω—É–∂–µ–Ω**.
* **Dev:** –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ —É–¥–æ–±–Ω–µ–µ –¥–µ—Ä–∂–∞—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—ã–π node –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** (`npm run dev`) + HMR, –∞ PHP –æ—Ç–¥–µ–ª—å–Ω–æ.

–ò—Ç–æ–≥:

* Prod: **multi-stage**
* Dev: **–ª—É—á—à–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π node —Å–µ—Ä–≤–∏—Å**

---

## 4) Laravel + Nuxt

–¢—É—Ç —Ä–∞–∑–≤–∏–ª–∫–∞ –ø–æ —Ä–µ–∂–∏–º—É Nuxt:

### A) Nuxt –∫–∞–∫ Static (SSG) –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ SPA (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–∏–∫–∏)

* **Prod/CI:** —Å–æ–±—Ä–∞—Ç—å Nuxt ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã ‚Üí —Ä–∞–∑–¥–∞–≤–∞—Ç—å –∏—Ö —á–µ—Ä–µ–∑ Nginx (–∏–ª–∏ —á–µ—Ä–µ–∑ Laravel public, –Ω–æ —á–∞—â–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π Nginx).
  Node –≤ —Ä–∞–Ω—Ç–∞–π–º–µ **–Ω–µ –Ω—É–∂–µ–Ω**.
* **Dev:** –æ—Ç–¥–µ–ª—å–Ω—ã–π node –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (dev server, HMR).

–ò—Ç–æ–≥: Prod **multi-stage/CI build**, Dev **–æ—Ç–¥–µ–ª—å–Ω—ã–π node**.

### B) Nuxt SSR (Node —Å–µ—Ä–≤–µ—Ä –Ω—É–∂–µ–Ω –≤ –ø—Ä–æ–¥–µ)

* **Prod:** Node **–Ω—É–∂–µ–Ω –≤ —Ä–∞–Ω—Ç–∞–π–º–µ**, –∑–Ω–∞—á–∏—Ç –æ–±—ã—á–Ω–æ –¥–µ–ª–∞—é—Ç **–æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä nuxt** (node runtime) + –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä php-fpm –¥–ª—è API/–±–µ–∫–µ–Ω–¥–∞.
* **Dev:** —Ç–æ–∂–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π node –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

–ò—Ç–æ–≥: SSR Nuxt –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ = **–æ—Ç–¥–µ–ª—å–Ω—ã–π Node –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –≤ –ø—Ä–æ–¥–µ —Ç–æ–∂–µ**.

---

# Best practices –ø–æ–¥ GitLab CI/CD

## –°–∞–º–∞—è ‚Äú–∑–¥–æ—Ä–æ–≤–∞—è‚Äù —Å—Ö–µ–º–∞ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ Laravel –ø—Ä–æ–µ–∫—Ç–æ–≤

**Dev (docker-compose):**

* `php-fpm` (Laravel)
* `nginx`
* `db` (Postgres/MySQL)
* `redis` (–µ—Å–ª–∏ –Ω–∞–¥–æ)
* `node` (—Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω `npm run dev`/HMR: Inertia/Vue, Nuxt dev, –∏–Ω–æ–≥–¥–∞ Blade/Livewire)

**Prod:**

* PHP-–æ–±—Ä–∞–∑ **–±–µ–∑ node**
* –∞—Å—Å–µ—Ç—ã —É–∂–µ —Å–æ–±—Ä–∞–Ω—ã –∏ –ª–µ–∂–∞—Ç –≤ `public/build`
* –æ—Ç–¥–µ–ª—å–Ω—ã–π `nginx` (–∏–ª–∏ ingress), –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è db/redis

## CI –≤–∞—Ä–∏–∞–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

–í GitLab pipeline:

1. `composer install` (—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
2. `npm ci && npm run build` (—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
3. —Ç–µ—Å—Ç—ã (phpunit/pest)
4. —Å–±–æ—Ä–∫–∞ docker image PHP (–∫–æ–ø–∏—Ä—É–µ—à—å –≥–æ—Ç–æ–≤—ã–µ –∞—Å—Å–µ—Ç—ã –≤–Ω—É—Ç—Ä—å)
5. push –≤ GitLab Container Registry
6. deploy (ssh/k8s/whatever)

### –ö–æ–≥–¥–∞ –∏–º–µ–Ω–Ω–æ –¥–µ—Ä–∂–∞—Ç—å Node –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –ø—Ä–æ–¥–µ

–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —É —Ç–µ–±—è **Nuxt SSR –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (–∏–ª–∏ –¥—Ä—É–≥–æ–π Node runtime –Ω—É–∂–µ–Ω –≤ –ø—Ä–æ–¥–µ). –í–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö Node ‚Äî **build-time**.

---

## –ë—ã—Å—Ç—Ä—ã–π –∏—Ç–æ–≥ –ø–æ —Ç–≤–æ–∏–º 4 —Ç–∏–ø–∞–º

* **Blade:** multi-stage (–æ–±—ã—á–Ω–æ), node-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–æ–ª—å–∫–æ –¥–ª—è HMR –≤ dev.
* **Livewire:** —Ç–∞–∫ –∂–µ, multi-stage; node –≤ dev –µ—Å–ª–∏ HMR.
* **Inertia + Vue:** prod multi-stage, dev –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π node.
* **Nuxt:**

    * static/SPA: prod multi-stage, dev –æ—Ç–¥–µ–ª—å–Ω—ã–π node
    * SSR: prod **–æ—Ç–¥–µ–ª—å–Ω—ã–π node –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**

---

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –≤—Å—ë –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ: **Laravel —Å–æ–∑–¥–∞—ë—Ç `package.json` –∏ `vite.config.*` –≤ —Ç–≤–æ—ë–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**, –∞ –¥–∞–ª—å—à–µ –≤–æ–ø—Ä–æ—Å —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º, **–≥–¥–µ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å `npm`** –∏ **–∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤–∏–¥—è—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ñ–∞–π–ª—ã**.

## 1) Dev-—Å—Ö–µ–º–∞ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º Node –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º: –∫–∞–∫ ‚Äú–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è‚Äù

### –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è

**PHP-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ Node-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–Ω—Ç–∏—Ä—É—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ø—Ä–æ–µ–∫—Ç** (volume bind mount).
–¢–æ–≥–¥–∞:

* `node` —á–∏—Ç–∞–µ—Ç `package.json`, `vite.config.js`, —Å—Ç–∞–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `node_modules`, –∑–∞–ø—É—Å–∫–∞–µ—Ç `vite`
* `php-fpm` –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç Laravel
* `nginx` –æ—Ç–¥–∞—ë—Ç —Å–∞–π—Ç –∏ (–≤ dev) –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç Vite HMR

–¢–æ –µ—Å—Ç—å ‚Äú–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ‚Äù = **–æ–±—â–∏–π volume + –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ host/port –¥–ª—è HMR**.

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä `docker-compose.yml` (dev)

```yaml
services:
  php:
    build:
      context: .
      dockerfile: php.Dockerfile
    volumes:
      - ./:/var/www/laravel
    working_dir: /var/www/laravel

  nginx:
    image: nginx:alpine
    ports:
      - "8080:80"
    volumes:
      - ./:/var/www/laravel
      - ./nginx/dev.conf:/etc/nginx/conf.d/default.conf:ro
    depends_on:
      - php
      - node

  node:
    image: node:20-alpine
    working_dir: /var/www/laravel
    volumes:
      - ./:/var/www/laravel
      # –≤–∞–∂–Ω–æ: node_modules –ª—É—á—à–µ —Ö—Ä–∞–Ω–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–º volume,
      # —á—Ç–æ–±—ã –Ω–µ –ø–ª–æ–¥–∏—Ç—å –º—É—Å–æ—Ä –Ω–∞ —Ö–æ—Å—Ç–µ –∏ –Ω–µ –ª–æ–≤–∏—Ç—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
      - node_modules:/var/www/laravel/node_modules
    command: sh -lc "npm ci && npm run dev -- --host 0.0.0.0 --port 5173"
    ports:
      - "5173:5173"

volumes:
  node_modules:
```

### –ß—Ç–æ –Ω–∞–¥–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å –≤ `vite.config.js` –¥–ª—è Docker

–í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ Vite –¥–æ–ª–∂–µ–Ω —Å–ª—É—à–∞—Ç—å `0.0.0.0`, –∞ HMR –¥–æ–ª–∂–µ–Ω ‚Äú—Ä–µ–∫–ª–∞–º–∏—Ä–æ–≤–∞—Ç—å‚Äù –Ω–∞—Ä—É–∂–Ω—ã–π –∞–¥—Ä–µ—Å. –¢–∏–ø–æ–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç:

```js
export default defineConfig({
  server: {
    host: true,         // —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç 0.0.0.0
    port: 5173,
    strictPort: true,
    hmr: {
      host: 'localhost', // –∏–ª–∏ –¥–æ–º–µ–Ω –∏–∑ /etc/hosts, –Ω–∞–ø—Ä–∏–º–µ—Ä laravel.test
      port: 5173,
    },
  },
})
```

### –ö–∞–∫ Blade/Livewire/Inertia —ç—Ç–æ ‚Äú–≤–∏–¥—è—Ç‚Äù

Laravel (Blade/Livewire/Inertia) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `@vite(...)`.
–í dev, –∫–æ–≥–¥–∞ –∑–∞–ø—É—â–µ–Ω `npm run dev`, `@vite` **—Å–∞–º** –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç dev server —á–µ—Ä–µ–∑ `public/hot` (Vite plugin Laravel –ø–∏—à–µ—Ç —Ç—É–¥–∞ –∞–¥—Ä–µ—Å).

–¢–æ –µ—Å—Ç—å:

* —Ç—ã –ø–æ–¥–Ω—è–ª `node` —Å–µ—Ä–≤–∏—Å ‚Üí Vite —Å–æ–∑–¥–∞–ª `public/hot`
* Laravel —É–≤–∏–¥–µ–ª `public/hot` ‚Üí –Ω–∞—á–∞–ª —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ `http://...:5173`
* –≤ –ø—Ä–æ–¥–µ `public/hot` –Ω–µ—Ç ‚Üí Laravel –±–µ—Ä—ë—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç –∏–∑ `public/build/manifest.json`

–í–æ—Ç –∏ –≤—Å—è –º–∞–≥–∏—è.

---

## 2) Prod-—Å—Ö–µ–º–∞ (multi-stage): –∫–∞–∫ ‚Äú–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è‚Äù

### –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è

Node –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å:

* `npm ci`
* `npm run build`
  –†–µ–∑—É–ª—å—Ç–∞—Ç: `public/build` + `manifest.json`.

–î–∞–ª—å—à–µ —Ç—ã –ø—Ä–æ—Å—Ç–æ **–∫–æ–ø–∏—Ä—É–µ—à—å `public/build` –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π PHP-–æ–±—Ä–∞–∑**, –∏ –≤—Å—ë.

–¢–∏–ø–æ–≤–æ–π –∫—É—Å–æ–∫ multi-stage:

```dockerfile
FROM node:20-alpine AS frontend
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM php:8.5-fpm-alpine
WORKDIR /var/www/laravel
COPY . .
COPY --from=frontend /app/public/build /var/www/laravel/public/build
```

Laravel –≤ –ø—Ä–æ–¥–µ –≤–∏–¥–∏—Ç `public/build/manifest.json` –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Node.

---

## 3) –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å `node_modules` –≤ dev

Best practice –≤ Docker-dev:

* **–Ω–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `node_modules` —Å —Ö–æ—Å—Ç–∞**
* –¥–µ—Ä–∂–∞—Ç—å `node_modules` –≤ named volume (–∫–∞–∫ –≤ compose –≤—ã—à–µ)

–¢–∞–∫ –º–µ–Ω—å—à–µ ‚Äú–ø–æ—á–µ–º—É –Ω–∞ –º–∞–∫–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–∞ –ª–∏–Ω—É–∫—Å–µ –Ω–µ—Ç‚Äù.

---

## 4) –ê Nuxt –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

* **Nuxt dev**: —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å `node` –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç (–æ–±—ã—á–Ω–æ 3000/5173), nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç.
* **Nuxt static**: –≤ CI —Å–æ–±–∏—Ä–∞–µ—à—å —Å—Ç–∞—Ç–∏–∫—É ‚Üí nginx –µ—ë –æ—Ç–¥–∞—ë—Ç.
* **Nuxt SSR**: –≤ –ø—Ä–æ–¥–µ —Ç–æ–∂–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π node –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ –Ω–µ–≥–æ.

---

–ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç: **–Ω–µ—Ç, –¥–≤–∞ Dockerfile ‚Äî –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**.
–ò best practice ‚Äî –æ–±—ã—á–Ω–æ **–æ–¥–∏–Ω Dockerfile + —Ä–∞–∑–Ω—ã–µ —Ü–µ–ª–∏ (targets) + —Ä–∞–∑–Ω—ã–µ compose-—Ñ–∞–π–ª—ã**.

–°–µ–π—á–∞—Å –æ–±—ä—è—Å–Ω—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ üëá

---

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω–∞—è —Å—Ö–µ–º–∞

## üéØ –¶–µ–ª—å

* Dev: —É–¥–æ–±–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å (HMR, npm run dev, volume mount)
* Prod: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, —á–∏—Å—Ç—ã–π, immutable-–æ–±—Ä–∞–∑ –±–µ–∑ node

---

# üß± –õ—É—á—à–∏–π –ø–æ–¥—Ö–æ–¥: –û–î–ò–ù Dockerfile —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ stage

## –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```dockerfile
# =============================
# Stage 1 ‚Äî frontend build
# =============================
FROM node:20-alpine AS frontend

WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build


# =============================
# Stage 2 ‚Äî php base (dev)
# =============================
FROM php:8.5-fpm-alpine AS php-base

# —Ç—É—Ç —Ç–≤–æ–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
# (—Ç–æ—Ç Dockerfile –∫–æ—Ç–æ—Ä—ã–π —É —Ç–µ–±—è –∑–∞—Ä–∞–±–æ—Ç–∞–ª)

WORKDIR /var/www/laravel
COPY . .


# =============================
# Stage 3 ‚Äî production
# =============================
FROM php-base AS production

COPY --from=frontend /app/public/build /var/www/laravel/public/build
```

---

# üöÄ –ö–∞–∫ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

## –í dev

–í docker-compose:

```yaml
services:
  php:
    build:
      context: .
      target: php-base   # ‚Üê –í–ê–ñ–ù–û
    volumes:
      - ./:/var/www/laravel

  node:
    image: node:20-alpine
    volumes:
      - ./:/var/www/laravel
    command: npm run dev
```

–¢—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å stage `php-base`, –±–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–±–æ—Ä–∫–∏.

---

## –í prod (CI/CD)

```bash
docker build -t myapp:latest --target production .
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è stage `production`, –≥–¥–µ:

* –∞—Å—Å–µ—Ç—ã —É–∂–µ —Å–æ–±—Ä–∞–Ω—ã
* node –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –æ–±—Ä–∞–∑–µ –Ω–µ—Ç
* –≤—Å—ë immutable

---

# üß† –ü–æ—á–µ–º—É —ç—Ç–æ –ª—É—á—à–µ, —á–µ–º 2 Dockerfile?

| –û–¥–∏–Ω Dockerfile      | –î–≤–∞ Dockerfile               |
|----------------------|------------------------------|
| –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è     | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏          |
| –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã | –õ–µ–≥–∫–æ –∑–∞–±—ã—Ç—å –æ–±–Ω–æ–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π |
| –ß–∏—â–µ CI              | –°–ª–æ–∂–Ω–µ–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞            |
| –°—Ç–∞–Ω–¥–∞—Ä—Ç –∏–Ω–¥—É—Å—Ç—Ä–∏–∏   | legacy-–ø–æ–¥—Ö–æ–¥                |

---

# üì¶ –ö–∞–∫ –¥–µ–ª–∞—é—Ç –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

### Dev:

* docker-compose.dev.yml
* volumes
* node –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º
* target: php-base

### Prod:

* CI —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑ —Å `--target production`
* –ø—É—à–∏—Ç –≤ registry
* –¥–µ–ø–ª–æ–π –≥–æ—Ç–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞

---

# üî• –ü–æ —Ç–≤–æ–∏–º —Ç–∏–ø–∞–º –ø—Ä–æ–µ–∫—Ç–æ–≤

| –¢–∏–ø –ø—Ä–æ–µ–∫—Ç–∞   | Dev         | Prod                   |
|---------------|-------------|------------------------|
| Blade         | node —Å–µ—Ä–≤–∏—Å | multistage             |
| Livewire      | node —Å–µ—Ä–≤–∏—Å | multistage             |
| Inertia + Vue | node —Å–µ—Ä–≤–∏—Å | multistage             |
| Nuxt static   | node —Å–µ—Ä–≤–∏—Å | multistage             |
| Nuxt SSR      | node —Å–µ—Ä–≤–∏—Å | –æ—Ç–¥–µ–ª—å–Ω—ã–π node runtime |

---

# üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º—ã—Å–ª–∏—Ç—å —Ç–∞–∫

Dev ‚Äî —ç—Ç–æ mutable —Å—Ä–µ–¥–∞
Prod ‚Äî —ç—Ç–æ immutable artifact

Dockerfile –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º artifact, –∞ –Ω–µ dev-—Å—Ü–µ–Ω–∞—Ä–∏–µ–º.

---

# üéÅ –ï—Å–ª–∏ —Ö–æ—á–µ—à—å

–Ø –º–æ–≥—É:

* –¥–∞—Ç—å —Ç–µ–±–µ production-ready —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
* –Ω–∞–ø–∏—Å–∞—Ç—å `docker-compose.dev.yml`
* –Ω–∞–ø–∏—Å–∞—Ç—å `.gitlab-ci.yml`
* —Ä–∞–∑–ª–æ–∂–∏—Ç—å –ø–æ –ø–∞–ø–∫–∞–º –∫–∞–∫ –¥–µ–ª–∞—é—Ç –≤ —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

–°–∫–∞–∂–∏:

* —Ç—ã –±—É–¥–µ—à—å –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ VPS?
* –∏–ª–∏ –≤ Kubernetes?
* –∏–ª–∏ —á–µ—Ä–µ–∑ GitLab Runner –Ω–∞ —Å–µ—Ä–≤–µ—Ä?


