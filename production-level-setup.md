

–î–∞–≤–∞–π –ø—Ä–æ–≤–µ–¥—É –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞. –°–Ω–∞—á–∞–ª–∞ –∏–∑—É—á—É –≤—Å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã.# –ê–Ω–∞–ª–∏–∑ Boilerplate: Laravel + Nginx (Unix Socket) + Docker

## –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: 7.5 / 10

–≠—Ç–æ **–¥–æ–±—Ä–æ—Ç–Ω—ã–π, –ø—Ä–æ–¥—É–º–∞–Ω–Ω—ã–π boilerplate** —Å —Ö–æ—Ä–æ—à–µ–π –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–π –∫—É–ª—å—Ç—É—Ä–æ–π. –û–Ω —è–≤–Ω–æ —Å–¥–µ–ª–∞–Ω –Ω–µ ¬´–Ω–∞ –∫–æ–ª–µ–Ω–∫–µ¬ª, –∞ —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º Docker best practices –∏ production-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π. –ù–æ –¥–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ ¬´production-grade starter kit¬ª –µ–º—É –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞–∂–Ω—ã—Ö –≤–µ—â–µ–π.

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Ö–æ—Ä–æ—à–æ (—Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã)

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Docker ‚Äî **9/10**
- **Unix socket** –º–µ–∂–¥—É Nginx –∏ PHP-FPM ‚Äî —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –∞ –Ω–µ TCP-–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ. –†–µ–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ.
- **Multi-stage Dockerfile** —Å targets (`php-base`, `frontend-build`, `production`) ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∏–Ω–¥—É—Å—Ç—Ä–∏–∏.
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ compose-—Ñ–∞–π–ª–æ–≤** (base / dev / prod) ‚Äî –≥—Ä–∞–º–æ—Ç–Ω–æ–µ overlay-—Ä–µ—à–µ–Ω–∏–µ.
- **Xdebug —á–µ—Ä–µ–∑ ARG** (`INSTALL_XDEBUG=false`) ‚Äî –Ω–µ —Ç–∞—â–∏—Ç—Å—è –≤ prod.
- **PIE** –≤–º–µ—Å—Ç–æ `pecl` ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è PHP 8.5.

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Äî **8/10**
- `www.conf` ‚Äî –æ—Ç–ª–∏—á–Ω–æ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω, –µ—Å—Ç—å ping endpoint –¥–ª—è healthcheck, slowlog, `pm.max_requests`.
- `laravel.conf` (Nginx) ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ `.env`, `server_tokens off`, –≥—Ä–∞–º–æ—Ç–Ω—ã–µ –±—É—Ñ–µ—Ä—ã FastCGI.
- `php.ini` ‚Äî `expose_php = Off`, OPCache –≤–∫–ª—é—á–µ–Ω, Xdebug —á–µ—Ä–µ–∑ ENV.
- **Healthcheck** –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö ‚Äî —ç—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ (FPM —á–µ—Ä–µ–∑ `cgi-fcgi`, Postgres —á–µ—Ä–µ–∑ `pg_isready`, Redis —á–µ—Ä–µ–∑ `ping`).

### 3. Dev Experience ‚Äî **8/10**
- **Makefile** ‚Äî —à–∏–∫–∞—Ä–Ω—ã–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ —Å —Ü–≤–µ—Ç–Ω—ã–º –≤—ã–≤–æ–¥–æ–º, –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ñ–∞–π–ª–æ–≤, –ª–æ–≥–∞–º–∏.
- `make setup` ‚Äî one-click bootstrap –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.
- pgAdmin, Redis, Node HMR ‚Äî –≤—Å—ë –≤ dev overlay.
- `node_modules` –≤ named volume ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –±–µ–∑ –∑–∞–º—É—Å–æ—Ä–∏–≤–∞–Ω–∏—è —Ö–æ—Å—Ç–∞.

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî **8/10**
- `README.md`, `SETUP.md`, `docs/` —Å –ø–ª–∞–Ω–∞–º–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ CI/CD.
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
- –û–ø–∏—Å–∞–Ω–∏–µ, –¥–ª—è –∫–∞–∫–∏—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ–¥—Ö–æ–¥–∏—Ç (Blade, Livewire, Inertia, API-only).

### 5. Prod-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å ‚Äî **7/10**
- `docker-compose.prod.yml` ‚Äî –æ–±—Ä–∞–∑—ã –∏–∑ registry, –æ—Ç–¥–µ–ª—å–Ω—ã–π `migrate` —Å–µ—Ä–≤–∏—Å.
- `gitlab-ci.yml` ‚Äî –µ—Å—Ç—å (–ø—É—Å—Ç—å –∏ –∫–∞–∫ include-—Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —à–∞–±–ª–æ–Ω).
- Immutable production –æ–±—Ä–∞–∑ —Å baked-in –∞—Å—Å–µ—Ç–∞–º–∏.

---

## ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî **–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç**
| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|-------------|
| `php.ini` ‚Äî —ç—Ç–æ **dev-–∫–æ–Ω—Ñ–∏–≥** (`display_errors = On`), –Ω–æ –æ–Ω –∂–µ COPY-–∏—Ç—Å—è –≤ prod –æ–±—Ä–∞–∑ | –ù—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π `php.prod.ini` –∏–ª–∏ ENV-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è |
| –ù–µ—Ç `.dockerignore` | –ù–∞–¥–æ –∏—Å–∫–ª—é—á–∏—Ç—å `.git`, `node_modules`, `docs/`, `.env*`, `docker-compose*.yml` –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–±–æ—Ä–∫–∏ |
| `POSTGRES_PASSWORD` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ ENV, –∞ –Ω–µ Docker secrets | –î–ª—è —Å–µ—Ä—å—ë–∑–Ω–æ–≥–æ –ø—Ä–æ–¥–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å secrets –∏–ª–∏ vault |
| –ù–µ—Ç rate-limiting / CORS / security headers –≤ Nginx | –°—Ç–æ–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å `add_header X-Frame-Options`, `X-Content-Type-Options`, `CSP` |

### 2. Production php.ini
–°–µ–π—á–∞—Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π `php.ini` –≤–∫–ª—é—á–∞–µ—Ç `display_errors = On` ‚Äî —ç—Ç–æ **–∫—Ä–∏—Ç–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞**. –í production-–æ–±—Ä–∞–∑–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
```ini
display_errors = Off
display_startup_errors = Off
opcache.validate_timestamps = 0
opcache.revalidate_freq = 0
```


### 3. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `.dockerignore`
–ë–µ–∑ –Ω–µ–≥–æ –≤ build context –ø–æ–ø–∞–¥–∞—é—Ç `.git/`, `node_modules/`, `docs/`, `.env`, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –∏ —Å–æ–∑–¥–∞—ë—Ç —Ä–∏—Å–∫–∏ —É—Ç–µ—á–∫–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤.

### 4. Production-–æ–±—Ä–∞–∑ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç `composer install`
–í `php.Dockerfile` stage `production` –¥–µ–ª–∞–µ—Ç `COPY ../ ./`, –Ω–æ **–Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç** `composer install --no-dev --optimize-autoloader`. –ó–Ω–∞—á–∏—Ç, –≤ production-–æ–±—Ä–∞–∑–µ –Ω–µ –±—É–¥–µ—Ç `vendor/`.

### 5. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:
- **Queue worker** (Laravel Horizon / `php artisan queue:work`) ‚Äî –Ω–∏ –≤ dev, –Ω–∏ –≤ prod compose
- **Scheduler** (`php artisan schedule:run`) ‚Äî –Ω–µ—Ç cron-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **SSL/TLS** ‚Äî –Ω–µ—Ç –¥–∞–∂–µ –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è HTTPS (–≤ prod –æ–±—ã—á–Ω–æ —á–µ—Ä–µ–∑ reverse proxy, –Ω–æ —Å—Ç–æ–∏—Ç —Ö–æ—Ç—è –±—ã —É–ø–æ–º—è–Ω—É—Ç—å)
- **Log rotation** ‚Äî –ª–æ–≥–∏ –≤ `stderr` ‚Äî –û–ö –¥–ª—è Docker, –Ω–æ –Ω–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `json-file` driver —Å –ª–∏–º–∏—Ç–∞–º–∏
- **Graceful shutdown** ‚Äî –Ω–µ—Ç `STOPSIGNAL SIGQUIT` –≤ PHP Dockerfile
- **Non-root user** ‚Äî PHP-FPM —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç www-data (—Ö–æ—Ä–æ—à–æ), –Ω–æ Dockerfile —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ—Ç root

### 6. –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–µ—Ç `docker-compose.test.yml` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è CI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è `phpunit.xml` —Å —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î (SQLite in-memory –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π Postgres)

### 7. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- `postgres:18.2-alpine`, `redis:8.6-alpine`, `node:24-alpine` ‚Äî –≤–µ—Ä—Å–∏–∏ —Å–≤–µ–∂–∏–µ (–¥–∞–∂–µ ¬´–∏–∑ –±—É–¥—É—â–µ–≥–æ¬ª), –Ω–æ `nginx:alpine` –±–µ–∑ —Ç–µ–≥–∞ –≤–µ—Ä—Å–∏–∏ ‚Äî –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –æ—Ü–µ–Ω–∫–∏

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| Docker-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | 9/10 | Multi-stage, socket, overlay compose ‚Äî –≤—Å—ë –Ω–∞ –≤—ã—Å–æ—Ç–µ |
| Dev Experience | 8/10 | Makefile + HMR + pgAdmin ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π DX |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 8/10 | –ü–æ–¥—Ä–æ–±–Ω–∞—è, —Å –ø–ª–∞–Ω–∞–º–∏ —Ä–∞–∑–≤–∏—Ç–∏—è |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | 5/10 | dev-–∫–æ–Ω—Ñ–∏–≥ –≤ prod, –Ω–µ—Ç .dockerignore, –Ω–µ—Ç security headers |
| Production-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | 6/10 | –ù–µ—Ç vendor/, –Ω–µ—Ç workers/scheduler, –Ω–µ—Ç prod php.ini |
| CI/CD | 6/10 | –¢–æ–ª—å–∫–æ include –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —à–∞–±–ª–æ–Ω, –Ω–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ |
| –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å | 6/10 | Healthcheck –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç log rotation, metrics |
| –ü–æ–ª–Ω–æ—Ç–∞ —Å—Ç–µ–∫–∞ | 6/10 | –ù–µ—Ç queue, scheduler, cron, SSL |

---

## üéØ –í–µ—Ä–¥–∏–∫—Ç

**7.5/10** ‚Äî –≠—Ç–æ **–æ—Ç–ª–∏—á–Ω–∞—è –æ—Å–Ω–æ–≤–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞**, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä–∞—è —Ç–æ–ª—å–∫–æ –≤—ã—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Docker-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è Laravel. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, –∫–æ–¥ —á–∏—Å—Ç—ã–π, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ö–æ—Ä–æ—à–∞—è.

**–ß—Ç–æ–±—ã –¥–æ—Ç—è–Ω—É—Ç—å –¥–æ 9+/10, –Ω—É–∂–Ω–æ:**
1. üî¥ –†–∞–∑–¥–µ–ª–∏—Ç—å `php.ini` –Ω–∞ dev/prod (–∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞—Ç—å)
2. üî¥ –î–æ–±–∞–≤–∏—Ç—å `composer install` –≤ production stage Dockerfile
3. üî¥ –°–æ–∑–¥–∞—Ç—å `.dockerignore`
4. üü° –î–æ–±–∞–≤–∏—Ç—å queue worker –∏ scheduler —Å–µ—Ä–≤–∏—Å—ã
5. üü° –î–æ–±–∞–≤–∏—Ç—å security headers –≤ Nginx
6. üü° –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é nginx (`nginx:1.27-alpine`)
7. üü° –î–æ–±–∞–≤–∏—Ç—å `STOPSIGNAL SIGQUIT` –∏ `USER www-data` –≤ Dockerfile
8. üü¢ –î–æ–±–∞–≤–∏—Ç—å `docker-compose.test.yml` –¥–ª—è CI

–ü—Ä–æ–µ–∫—Ç –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ö–æ—Ä–æ—à–æ –ø—Ä–æ–¥—É–º–∞–Ω–Ω—ã–π **internal boilerplate** –¥–ª—è –∫–æ–º–∞–Ω–¥—ã ‚Äî –∏ –æ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏! üëè